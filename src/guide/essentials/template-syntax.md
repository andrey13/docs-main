# Синтаксис шаблона {#template-syntax}

Vue использует синтаксис шаблона на основе HTML, который позволяет вам декларативно привязать визуализированный DOM к данным базового экземпляра компонента. Все шаблоны Vue представляют собой синтаксически правильный HTML, который может быть проанализирован браузерами, совместимыми со спецификациями, и парсерами HTML.

Под капотом Vue компилирует шаблоны в высокооптимизированный код JavaScript. В сочетании с системой реактивности Vue может разумно определять минимальное количество компонентов для повторного рендеринга и применять минимальное количество манипуляций с DOM при изменении состояния приложения.

Если вы знакомы с концепциями Virtual DOM и предпочитаете грубую мощь JavaScript, вы также можете [напрямую писать функции рендеринга](/guide/extras/render-function) вместо шаблонов с дополнительной поддержкой JSX. Однако обратите внимание, что они не обладают таким же уровнем оптимизации времени компиляции, как шаблоны.

## Интерполяция текста {#text-interpolation}

Наиболее простой формой привязки данных является текстовая интерполяция с использованием "усов" синтаксис (двойные фигурные скобки):

```vue-html
<span>Message: {{ msg }}</span>
```

Тег mustache будет заменен на значение свойства `msg` [из соответствующего экземпляра компонента](/guide/essentials/reactivity-fundamentals#declaring-reactive-state). Он также будет обновляться при изменении свойства `msg`.

## Сырой HTML {#raw-html}

Двойные усы интерпретируют данные как обычный текст, а не HTML. Для вывода реального HTML необходимо использовать директиву [`v-html`](/api/built-in-directives#v-html):

```vue-html
<p>Using text interpolation: {{ rawHtml }}</p>
<p>Using v-html directive: <span v-html="rawHtml"></span></p>
```

<script setup>
  const rawHtml = '<span style="color: red">This should be red.</span>'
</script>

<div class="demo">
  <p>Using text interpolation: {{ rawHtml }}</p>
  <p>Using v-html directive: <span v-html="rawHtml"></span></p>
</div>

Здесь мы сталкиваемся с чем-то новым. Атрибут `v-html`, который вы видите, называется **директивой**. Директивы имеют префикс `v-`, чтобы указать, что они являются специальными атрибутами, предоставляемыми Vue, и, как вы могли догадаться, они применяют особое реактивное поведение к визуализируемому DOM. Здесь мы в основном говорим: «Обновляйте внутренний HTML-код этого элемента с помощью свойства `rawHtml` в текущем активном экземпляре».

Содержимое `span` будет заменено значением свойства `rawHtml`, интерпретируемым как обычный HTML – привязки данных игнорируются. Обратите внимание, что вы не можете использовать `v-html` для создания частей шаблона, потому что Vue не является механизмом шаблонов на основе строк. Вместо этого компоненты предпочтительнее в качестве фундаментальной единицы для повторного использования и композиции пользовательского интерфейса.

:::warning Предупреждение безопасности
Динамическое отображение произвольного HTML на вашем веб-сайте может быть очень опасным, поскольку оно может легко привести к [XSS-уязвимостям](https://en.wikipedia.org/wiki/Cross-site_scripting). Используйте `v-html` только для доверенного контента и **никогда** для контента, предоставленного пользователями.
:::

## Привязки атрибутов {#attribute-bindings}

Усы нельзя использовать внутри атрибутов HTML. Вместо этого используйте [директиву `v-bind`](/api/built-in-directives#v-bind):

```vue-html
<div v-bind:id="dynamicId"></div>
```

Директива `v-bind` предписывает Vue синхронизировать атрибут `id` элемента со свойством `dynamicId` компонента. Если связанное значение равно `null` или `undefined`, атрибут будет удален из визуализируемого элемента.

### Сокращение {#shorthand}

Поскольку `v-bind` так часто используется, у него есть специальный сокращённый синтаксис:

```vue-html
<div :id="dynamicId"></div>
```

Атрибуты, начинающиеся с `:`, могут немного отличаться от обычного HTML, но на самом деле это допустимый символ для имен атрибутов, и все браузеры, поддерживающие Vue, могут правильно его анализировать. Кроме того, они не отображаются в финальной отрендеренной разметке. Сокращенный синтаксис необязателен, но вы, вероятно, оцените его, когда узнаете больше о его использовании позже.

> В остальной части руководства мы будем использовать сокращенный синтаксис в примерах кода, так как это наиболее распространенное использование для разработчиков Vue.

### Логические атрибуты {#boolean-attributes}

[Булевы атрибуты](https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes) — это атрибуты, которые могут указывать значения true/false своим присутствием в элементе. Например, [`disabled`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/disabled) — один из наиболее часто используемых логических атрибутов.

`v-bind` в этом случае работает немного иначе:

```vue-html
<button :disabled="isButtonDisabled">Button</button>
```

Атрибут `disabled` будет включен, если `isButtonDisabled` имеет [истинное значение] (https://developer.mozilla.org/en-US/docs/Glossary/Truthy). Он также будет включен, если значение представляет собой пустую строку, сохраняя согласованность с `<button disabled="">`. Для других [ложных значений](https://developer.mozilla.org/en-US/docs/Glossary/Falsy) атрибут будет опущен.

### Динамическое связывание нескольких атрибутов {#dynamically-binding-multiple-attributes}

Если у вас есть объект JavaScript, представляющий несколько атрибутов, который выглядит следующим образом:

<div class="composition-api">

```js
const objectOfAttrs = {
  id: 'container',
  class: 'wrapper'
}
```

</div>
<div class="options-api">

```js
data() {
  return {
    objectOfAttrs: {
      id: 'container',
      class: 'wrapper'
    }
  }
}
```

</div>

Вы можете привязать их к одному элементу, используя `v-bind` без аргумента:

```vue-html
<div v-bind="objectOfAttrs"></div>
```

## Использование выражений JavaScript {#using-javascript-expressions}

До сих пор мы привязывали только простые ключи свойств в наших шаблонах. Но на самом деле Vue поддерживает всю мощь выражений JavaScript во всех привязках данных:

```vue-html
{{ number + 1 }}

{{ ok ? 'YES' : 'NO' }}

{{ message.split('').reverse().join('') }}

<div :id="`list-${id}`"></div>
```

Эти выражения будут оцениваться как JavaScript в области данных текущего экземпляра компонента.

В шаблонах Vue выражения JavaScript могут использоваться в следующих позициях:

- Внутренние интерполяции текста (усы)
- В значении атрибута любых директив Vue (специальные атрибуты, начинающиеся с `v-`)

### Только выражения {#expressions-only}

Каждая привязка может содержать только **одно выражение**. Выражение — это фрагмент кода, который можно преобразовать в значение. Простая проверка — можно ли его использовать после `return`.

Следовательно, следующее **НЕ** будет работать:

```vue-html
<!-- это утверждение, а не выражение: -->
{{ var a = 1 }}

<!-- управление потоком тоже не будет работать, используйте троичные выражения -->
{{ if (ok) { return message } }}
```

### Вызов функций {#calling-functions}

Внутри выражения привязки можно вызвать метод, открытый компонентом:

```vue-html
<time :title="toTitleDate(date)" :datetime="date">
  {{ formatDate(date) }}
</time>
```

:::tip
Функции, вызываемые внутри выражений привязки, будут вызываться каждый раз при обновлении компонента, поэтому они **не** должны иметь никаких побочных эффектов, таких как изменение данных или запуск асинхронных операций.
:::

### Ограниченный доступ к глобальным переменным {#restricted-globals-access}

Выражения шаблонов изолированы и имеют доступ только к [ограниченному списку глобальных переменных](https://github.com/vuejs/core/blob/main/packages/shared/src/globalsAllowList.ts#L3). В списке представлены часто используемые встроенные глобальные переменные, такие как «Math» и «Date».

Глобальные значения, не включенные в список явно, например присоединенные пользователем свойства окна, не будут доступны в выражениях шаблона. Однако вы можете явно определить дополнительные глобальные переменные для всех выражений Vue, добавив их в [`app.config.globalProperties`](/api/application#app-config-globalproperties).

## Директивы {#directives}

Директивы — это специальные атрибуты с префиксом `v-`. Vue предоставляет ряд [встроенных директив](/api/built-in-directives), включая `v-html` и `v-bind`, которые мы представили выше.

Ожидается, что значения атрибута директивы будут отдельными выражениями JavaScript (за исключением `v-for`, `v-on` и `v-slot`, которые будут обсуждаться в соответствующих разделах позже). Задача директивы — реактивно применять обновления к DOM при изменении значения ее выражения. Возьмите [`v-if`](/api/built-in-directives#v-if) в качестве примера:

```vue-html
<p v-if="seen">Now you see me</p>
```

Здесь директива `v-if` удалит/вставит элемент `<p>` в зависимости от истинности значения выражения `seen`.

### Аргументы {#arguments}

Некоторые директивы могут принимать «аргумент», обозначаемый двоеточием после имени директивы. Например, директива `v-bind` используется для реактивного обновления атрибута HTML:

```vue-html
<a v-bind:href="url"> ... </a>

<!-- shorthand -->
<a :href="url"> ... </a>
```

Здесь `href` — это аргумент, который указывает директиве `v-bind` связать атрибут `href` элемента со значением выражения `url`. В сокращении все, что находится перед аргументом (например, `v-bind:`), сжимается в один символ `:`.

Другим примером является директива `v-on`, которая прослушивает события DOM:

```vue-html
<a v-on:click="doSomething"> ... </a>

<!-- shorthand -->
<a @click="doSomething"> ... </a>
```

Здесь аргумент — это имя события для прослушивания: `click`. `v-on` имеет соответствующее сокращение, а именно символ `@`. Мы также поговорим об обработке событий более подробно.

### Динамические аргументы {#dynamic-arguments}

Также можно использовать выражение JavaScript в аргументе директивы, заключив его в квадратные скобки:

```vue-html
<!--
Обратите внимание, что существуют некоторые ограничения на выражение аргумента,
как объяснено в разделах «Динамические ограничения значения аргумента» и «Динамические ограничения синтаксиса аргумента» ниже.
-->
<a v-bind:[attributeName]="url"> ... </a>

<!-- shorthand -->
<a :[attributeName]="url"> ... </a>
```

Здесь `attributeName` будет динамически оцениваться как выражение JavaScript, и его оцененное значение будет использоваться как окончательное значение для аргумента. Например, если экземпляр вашего компонента имеет свойство данных `attributeName`, значение которого равно `"href"`, то эта привязка будет эквивалентна `v-bind:href`.

Точно так же вы можете использовать динамические аргументы для привязки обработчика к имени динамического события:

```vue-html
<a v-on:[eventName]="doSomething"> ... </a>

<!-- shorthand -->
<a @[eventName]="doSomething">
```

В этом примере, когда значение `eventName` равно `"focus"`, `v-on:[eventName]` будет эквивалентно `v-on:focus`.

#### Динамические ограничения значения аргумента {#dynamic-argument-value-constraints}

Ожидается, что динамические аргументы будут оцениваться как строка, за исключением `null`. Специальное значение `null` можно использовать для явного удаления привязки. Любое другое нестроковое значение вызовет предупреждение.

#### Синтаксические ограничения динамического аргумента {#dynamic-argument-syntax-constraints}

Выражения динамических аргументов имеют некоторые синтаксические ограничения, поскольку некоторые символы, такие как пробелы и кавычки, недопустимы в именах атрибутов HTML. Например, следующее неверно:

```vue-html
<!-- This will trigger a compiler warning. -->
<a :['foo' + bar]="value"> ... </a>
```

Если вам нужно передать сложный динамический аргумент, возможно, лучше использовать [вычисляемое свойство](./computed), которое мы вскоре рассмотрим.

При использовании шаблонов в DOM (шаблоны, написанные непосредственно в HTML-файле) вам также следует избегать именования ключей с использованием символов верхнего регистра, поскольку браузеры будут переводить имена атрибутов в нижний регистр:

```vue-html
<a :[someAttr]="value"> ... </a>
```

Вышеприведенное будет преобразовано в `:[someattr]` в шаблонах DOM. Если ваш компонент имеет свойство `someAttr` вместо `someattr`, ваш код не будет работать. Шаблоны внутри однофайловых компонентов **не** подпадают под это ограничение.

### Модификаторы {#modifiers}

Модификаторы — это специальные постфиксы, обозначаемые точкой, которые указывают на то, что директива должна быть связана каким-то особым образом. Например, модификатор `.prevent` указывает директиве `v-on` вызывать `event.preventDefault()` при инициированном событии:

```vue-html
<form @submit.prevent="onSubmit">...</form>
```

Другие примеры модификаторов вы увидите позже, [для `v-on`](./event-handling#event-modifiers) и [для `v-model`](./forms#modifiers), когда мы рассмотрим эти функции.

И, наконец, вот полный визуализированный синтаксис директивы:

![граф синтаксиса директивы](./images/directive.png)

<!-- https://www.figma.com/file/BGWUknIrtY9HOmbmad0vFr/Directive -->
